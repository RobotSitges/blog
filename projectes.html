<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projectes · Robot Sitges</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <!-- Capçalera i menú -->
  <div id="menu"></div>

  <main>
    <section class="bloc-dades">
      <h2><i class="fas fa-thermometer-half"></i> Sensor de temperatura</h2>
      <p id="sensor">Carregant dades...</p>
      <p class="explicacio">
      Aquesta dada s'obté d'un sensor real connectat a un projecte educatiu. Permet als participants veure en temps real com es poden mesurar variables físiques amb tecnologia.
      </p>
    </section>
  </main>
  
  <!-- Peu de pàgina -->
  <div id="peu"></div>

  <script>
    // Carrega menú i peu de pàgina
    fetch("menu.html")
      .then(res => res.text())
      .then(data => document.getElementById("menu").innerHTML = data);
    fetch("peu.html")
      .then(res => res.text())
      .then(data => document.getElementById("peu").innerHTML = data);

    // Dades de temperatura
    fetch("https://api.thingspeak.com/channels/2657753/fields/6/last.json")
      .then(response => response.json())
      .then(data => {
        const temperatura = data.field6;
        const dataHora = new Date(data.created_at);
        const hora = dataHora.toLocaleTimeString('ca-ES', { hour: '2-digit', minute: '2-digit' });
        const dataFormatejada = dataHora.toLocaleDateString('ca-ES');

        document.getElementById("sensor").innerText =
          `Temperatura: ${temperatura} ºC\n(Hora de lectura: ${hora} del ${dataFormatejada})`;
      });
  </script>
</body>
</html>
